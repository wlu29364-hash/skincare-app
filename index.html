<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>护肤记录</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./icon-192.png">
  <meta name="theme-color" content="#8bbf7f">
  <style>
    :root {
      --bg: #f4faf3;
      --bg-soft: #e6f3e4;
      --primary: #8bbf7f;
      --primary-soft: #c6e3c0;
      --text: #123022;
      --muted: #6b8b72;
      --radius-xl: 28px;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 8px 24px rgba(15, 60, 30, 0.12);
      --transition-fast: 0.2s ease;
      --font-cn: -apple-system,BlinkMacSystemFont,"SF Pro SC","PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
    }
    * { box-sizing:border-box; }
    html,body {
      margin:0; padding:0;
      font-family:var(--font-cn);
      background:var(--bg);
      color:var(--text);
    }
    body { min-height:100vh; }
    header {
      position:sticky;
      top:0;
      z-index:20;
      background:var(--primary);
      color:#fff;
      padding:14px 18px 10px;
      box-shadow:0 2px 10px rgba(0,0,0,.08);
    }
    .title-row {
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    h1 {
      margin:0;
      font-size:26px;
      font-weight:700;
      letter-spacing:2px;
    }
    .badge {
      padding:4px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.18);
      font-size:12px;
    }
    .tabs {
      display:flex;
      gap:14px;
      margin-top:14px;
      padding:0 4px 4px;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
    }
    .tab {
      flex:0 0 auto;
      padding:10px 26px;
      border-radius:var(--radius-xl);
      background:rgba(255,255,255,.14);
      color:#eaf6ea;
      border:none;
      font-size:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:background var(--transition-fast),color var(--transition-fast),transform var(--transition-fast),box-shadow var(--transition-fast);
      white-space:nowrap;
    }
    .tab.active {
      background:#fff;
      color:var(--primary);
      box-shadow:var(--shadow-soft);
      transform:translateY(-2px);
    }
    main {
      padding:18px 14px 18px;
    }
    .card {
      background:#fff;
      border-radius:var(--radius-lg);
      padding:16px 14px 18px;
      box-shadow:var(--shadow-soft);
    }
    .card + .card { margin-top:16px; }
    .hide { display:none; }
    label {
      display:block;
      margin:10px 2px 6px;
      font-size:14px;
      color:var(--muted);
    }
    select,input[type="text"],input[type="date"],textarea {
      width:100%;
      padding:11px 12px;
      border-radius:var(--radius-md);
      border:1px solid #d4e4d2;
      outline:none;
      font-size:15px;
      background:#fff;
      transition:border var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
      font-family:var(--font-cn);
    }
    select:focus,input:focus,textarea:focus {
      border-color:var(--primary);
      box-shadow:0 0 0 2px rgba(139,191,127,.16);
    }
    textarea {
      resize:vertical;
      min-height:84px;
    }
    .seg {
      display:flex;
      margin:10px 0 6px;
      border-radius:var(--radius-xl);
      background:var(--bg-soft);
      padding:4px;
    }
    .seg button {
      flex:1;
      padding:10px 0;
      border-radius:var(--radius-xl);
      border:none;
      background:transparent;
      font-size:16px;
      color:var(--muted);
      cursor:pointer;
      transition:all var(--transition-fast);
    }
    .seg button.active {
      background:var(--primary);
      color:#fff;
      box-shadow:0 4px 12px rgba(15,60,30,.18);
    }
    .chips {
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin:4px 0 4px;
    }
    .chip {
      padding:6px 12px;
      font-size:13px;
      border-radius:999px;
      border:1px solid #d4e4d2;
      color:var(--muted);
      background:#fff;
      cursor:pointer;
      transition:all var(--transition-fast);
    }
    .chip.active {
      background:var(--primary-soft);
      color:var(--text);
      border-color:var(--primary);
      box-shadow:0 2px 6px rgba(15,60,30,.12);
    }
    .btn-primary {
      width:100%;
      margin-top:16px;
      padding:12px 10px;
      border-radius:var(--radius-xl);
      border:none;
      background:var(--primary);
      color:#fff;
      font-size:18px;
      font-weight:600;
      cursor:pointer;
      box-shadow:var(--shadow-soft);
      transition:all var(--transition-fast);
    }
    .btn-primary:active {
      transform:scale(.97);
      box-shadow:0 4px 12px rgba(0,0,0,.18);
    }
    .small {
      font-size:12px;
      color:var(--muted);
      margin-top:6px;
    }
    ul.list {
      list-style:none;
      padding:0;
      margin:10px 0 0;
      font-size:14px;
    }
    .list li {
      padding:8px 10px;
      border-radius:var(--radius-md);
      background:#f6faf5;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:6px;
    }
    .pill {
      font-size:11px;
      padding:2px 8px;
      border-radius:999px;
      background:var(--primary-soft);
      color:var(--text);
      margin-left:4px;
    }
    .btn-danger {
      padding:4px 10px;
      font-size:12px;
      border-radius:999px;
      border:none;
      background:#f56565;
      color:#fff;
      cursor:pointer;
    }
    .history-item {
      padding:8px 10px;
      border-radius:var(--radius-md);
      background:#f6faf5;
      margin-bottom:6px;
      font-size:13px;
      line-height:1.5;
    }
    .toast {
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%) translateY(30px);
      padding:8px 16px;
      background:rgba(18,48,34,.96);
      color:#fff;
      border-radius:999px;
      font-size:13px;
      opacity:0;
      pointer-events:none;
      transition:all .25s ease;
      z-index:50;
    }
    .toast.show {
      opacity:1;
      transform:translateX(-50%) translateY(0);
    }
    @media (min-width:768px) {
      main { max-width:520px; margin:0 auto 24px; }
    }
  </style>
</head>
<body>
<header>
  <div class="title-row">
    <h1>护肤记录</h1>
    <div class="badge" id="versionBadge">v3.2.6</div>
  </div>
  <div class="tabs" id="tabs">
    <button class="tab active" data-tab="log">记录</button>
    <button class="tab" data-tab="stats">统计</button>
    <button class="tab" data-tab="products">产品库</button>
    <button class="tab" data-tab="history">历史</button>
  </div>
</header>
<main>
  <section id="log" class="card">
    <label for="dateInput">日期</label>
    <input id="dateInput" type="date">
    <label>早/晚</label>
    <div class="seg" id="periodSeg">
      <button type="button" data-value="am" class="active">早 (AM)</button>
      <button type="button" data-value="pm">晚 (PM)</button>
    </div>
    <label for="productsInput">使用产品</label>
    <input id="productsInput" type="text" list="productDatalist"
           placeholder="可输入或从产品库选择，多项用 、 或逗号隔开">
    <datalist id="productDatalist"></datalist>
    <label>使用感受</label>
    <div class="chips" id="feelingChips">
      <div class="chip">清爽</div>
      <div class="chip">滋润</div>
      <div class="chip">有刺痛</div>
      <div class="chip">成膜感强</div>
      <div class="chip">黏腻</div>
      <div class="chip">闷痘</div>
      <div class="chip">其他</div>
    </div>
    <label>皮肤状态</label>
    <div class="chips" id="skinChips">
      <div class="chip">偏干</div>
      <div class="chip">正常</div>
      <div class="chip">出油</div>
      <div class="chip">T区暗沉</div>
      <div class="chip">闷痘</div>
      <div class="chip">泛红</div>
      <div class="chip">稳定</div>
    </div>
    <label for="noteInput">备注</label>
    <textarea id="noteInput" placeholder="例如：今天偏干，晚上加了面膜..."></textarea>
    <label>照片（最多 3 张，仅本地）</label>
    <input id="photoInput" type="file" accept="image/*" multiple>
    <button id="saveBtn" class="btn-primary">保存今日记录</button>
    <div class="small">选中的照片不会上传，仅保存在你的设备本地。所有数据存储在本地浏览器，如更换设备或清理浏览器数据，记录会消失。</div>
  </section>
  <section id="stats" class="card hide">
    <h2>统计</h2>
    <p id="statSummary" class="small"></p>
    <ul id="topProducts" class="list"></ul>
  </section>
  <section id="products" class="card hide">
    <h2>产品库</h2>
    <label for="pname">产品名，如：精华 / 面霜 / 面膜</label>
    <input id="pname" type="text" placeholder="输入产品名">
    <label for="ptype">产品类型</label>
    <select id="ptype">
      <option value="精华">精华</option>
      <option value="面霜">面霜</option>
      <option value="面膜">面膜</option>
      <option value="洁面">洁面</option>
      <option value="水">水 / 喷雾</option>
      <option value="乳液">乳液</option>
      <option value="眼霜">眼霜</option>
      <option value="防晒">防晒</option>
      <option value="其他">其他</option>
    </select>
    <label for="puse">适用时段</label>
    <select id="puse">
      <option value="all">早晚皆可</option>
      <option value="am">早用</option>
      <option value="pm">晚用</option>
    </select>
    <button id="addProductBtn" class="btn-primary" style="margin-top:14px;">添加到产品库</button>
    <ul id="productList" class="list"></ul>
  </section>
  <section id="history" class="card hide">
    <h2>历史记录</h2>
    <ul id="historyList" class="list"></ul>
  </section>
</main>
<div id="toast" class="toast"></div>
<script src="./app.js?v=326" defer></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register('./sw.js').catch(function(e){});
    });
  }
</script>
</body>
</html>
